--- a/net/minecraft/world/entity/monster/Illusioner.java
+++ b/net/minecraft/world/entity/monster/Illusioner.java
@@ -93,7 +_,7 @@
 
    public void m_8107_() {
       super.m_8107_();
-      if (this.m_9236_().f_46443_ && this.m_20145_()) {
+      if (this.f_19853_.f_46443_ && this.m_20145_()) {
          --this.f_32908_;
          if (this.f_32908_ < 0) {
             this.f_32908_ = 0;
@@ -119,10 +_,10 @@
             }
 
             for(int l = 0; l < 16; ++l) {
-               this.m_9236_().m_7106_(ParticleTypes.f_123796_, this.m_20208_(0.5D), this.m_20187_(), this.m_20246_(0.5D), 0.0D, 0.0D, 0.0D);
+               this.f_19853_.m_7106_(ParticleTypes.f_123796_, this.m_20208_(0.5D), this.m_20187_(), this.m_20246_(0.5D), 0.0D, 0.0D, 0.0D);
             }
 
-            this.m_9236_().m_7785_(this.m_20185_(), this.m_20186_(), this.m_20189_(), SoundEvents.f_12052_, this.m_5720_(), 1.0F, 1.0F, false);
+            this.f_19853_.m_7785_(this.m_20185_(), this.m_20186_(), this.m_20189_(), SoundEvents.f_12052_, this.m_5720_(), 1.0F, 1.0F, false);
          }
       }
 
@@ -178,15 +_,17 @@
    }
 
    public void m_6504_(LivingEntity p_32918_, float p_32919_) {
-      ItemStack itemstack = this.m_6298_(this.m_21120_(ProjectileUtil.m_37297_(this, Items.f_42411_)));
+      ItemStack itemstack = this.m_6298_(this.m_21120_(ProjectileUtil.getWeaponHoldingHand(this, item -> item instanceof net.minecraft.world.item.BowItem)));
       AbstractArrow abstractarrow = ProjectileUtil.m_37300_(this, itemstack, p_32919_);
+      if (this.m_21205_().m_41720_() instanceof net.minecraft.world.item.BowItem)
+         abstractarrow = ((net.minecraft.world.item.BowItem)this.m_21205_().m_41720_()).customArrow(abstractarrow);
       double d0 = p_32918_.m_20185_() - this.m_20185_();
       double d1 = p_32918_.m_20227_(0.3333333333333333D) - abstractarrow.m_20186_();
       double d2 = p_32918_.m_20189_() - this.m_20189_();
       double d3 = Math.sqrt(d0 * d0 + d2 * d2);
-      abstractarrow.m_6686_(d0, d1 + d3 * (double)0.2F, d2, 1.6F, (float)(14 - this.m_9236_().m_46791_().m_19028_() * 4));
+      abstractarrow.m_6686_(d0, d1 + d3 * (double)0.2F, d2, 1.6F, (float)(14 - this.f_19853_.m_46791_().m_19028_() * 4));
       this.m_5496_(SoundEvents.f_12382_, 1.0F, 1.0F / (this.m_217043_().m_188501_() * 0.4F + 0.8F));
-      this.m_9236_().m_7967_(abstractarrow);
+      this.f_19853_.m_7967_(abstractarrow);
    }
 
    public AbstractIllager.IllagerArmPose m_6768_() {
@@ -208,7 +_,7 @@
          } else if (Illusioner.this.m_5448_().m_19879_() == this.f_32942_) {
             return false;
          } else {
-            return Illusioner.this.m_9236_().m_6436_(Illusioner.this.m_20183_()).m_19049_((float)Difficulty.NORMAL.ordinal());
+            return Illusioner.this.f_19853_.m_6436_(Illusioner.this.m_20183_()).m_19049_((float)Difficulty.NORMAL.ordinal());
          }
       }
 
@@ -230,7 +_,7 @@
       }
 
       protected void m_8130_() {
-         Illusioner.this.m_5448_().m_147207_(new MobEffectInstance(MobEffects.f_19610_, 400), Illusioner.this);
+         Illusioner.this.m_5448_().addEffect(new MobEffectInstance(MobEffects.f_19610_, 400), Illusioner.this, org.bukkit.event.entity.EntityPotionEffectEvent.Cause.ILLUSION); // CraftBukkit
       }
 
       protected SoundEvent m_7030_() {
@@ -260,7 +_,7 @@
       }
 
       protected void m_8130_() {
-         Illusioner.this.m_7292_(new MobEffectInstance(MobEffects.f_19609_, 1200));
+         Illusioner.this.addEffect(new MobEffectInstance(MobEffects.f_19609_, 1200), org.bukkit.event.entity.EntityPotionEffectEvent.Cause.ATTACK); // CraftBukkit
       }
 
       @Nullable
